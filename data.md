# CactusPlugin: Экспорт и импорт данных

CactusLib позволяет плагинам участвовать в общем механизме резервного копирования и восстановления плагинов. Это дает пользователям возможность сохранять не только настройки плагина, но и другие важные данные, необходимые для работы плагина.

Для этого в классе вашего плагина необходимо реализовать два метода: `export_data` и `import_data`.

## Метод `export_data`
Этот метод вызывается, когда пользователь запускает процедуру создания резервной копии (бэкапа). Ваша задача — собрать все данные, которые необходимо сохранить, и вернуть их в виде словаря.

> [!IMPORTANT]
> Возвращаемый словарь должен содержать только простые типы данных, которые легко сериализуются в JSON: строки, числа, списки, bool-значения и другие словари.

```python
class MyNotesPlugin(CactusUtils.Plugin):
    def export_data(self) -> dict:
        """
        Собирает данные плагина для экспорта.
        """
        self.info("Экспортируем данные плагина MyNotesPlugin...")
        
        # Предположим, плагин хранит заметки в каком-то файле у себя
        my_notes = self.read_notes("notes_list")

        return {
            "notes": my_notes,
            # ... другие данные, которые необходимо экспортировать ...
        }
```

## Метод `import_data`
Этот метод вызывается при восстановлении из резервной копии. На вход он получает словарь, который ранее был сгенерирован методом `export_data`. Ваша задача — безопасно извлечь данные и восстановить состояние плагина.

> [!WARNING]
> Всегда пишите код импорта с учетом того, что данные могут отсутствовать или быть поврежденными. Используйте метод `.get()` для безопасного доступа к ключам словаря, чтобы избежать ошибок.

```python
class MyNotesPlugin(CactusUtils.Plugin):
    # ... метод export_data ...

    def import_data(self, data: dict):
        """
        Импортирует данные плагина из предоставленного словаря.
        """
        self.info("Импортируем данные в плагин MyNotesPlugin...")

        # Безопасно извлекаем данные, используя .get() с указанием значения по умолчанию
        notes_to_import = data.get("notes", [])
        
        # Сохраняем импортированные данные в настройки плагина
        self.write_notes("notes_list", notes_to_import)

        self.info("Заметки и настройки успешно импортированы!")
```
